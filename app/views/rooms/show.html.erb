<div class="container">
  <div class="box col-md-12">
  <div class="row">
  <div class="col-sm-8">
      <h3><%= @room.listing_name %>,<%= @room.address %></h3>
 <% if @room.image.attached? %><%= image_tag @room.image, width: "100%", height: "450px" %>
            <% end %>
  </div>


  <div class="col-sm-4">
    <br /><br />
    <%= render 'reservations/form' %>
  </div>
</div>
</div>
</div>
<br /><br />



  <div class="row">
<div class="container">
   <div class="row">
    <div class="col-sm-8">
<% @room.amenities.each do |amenity| %>
        <div class="row feature text-center">
    <div class="col-3 col-sm">
      <i class="fa fa-home fa-2x"></i>
    </div>


    <div class="col-3 col-sm">
      <i class="fa fa-user fa-2x"></i>
    </div>

    <div class="col-3 col-sm">
      <i class="fa fa-bed fa-2x"></i>
    </div>

    <div class="col-3 col-sm">
      <i class="fa fa-bath fa-2x"></i>
    </div>

  </div>

      <div class="row feature text-center">
    <div class="col-3 col-sm"><%= amenity.hometype %></div>
    <div class="col-3 col-sm"><%= pluralize(amenity.accommodate, "Guest") %></div>
    <div class="col-3 col-sm"><%= pluralize(amenity.bedroom, "Bedroom") %></div>
    <div class="col-3 col-sm"><%= pluralize(amenity.bathroom, "Bathroom") %></div>
  </div>
  <% end %>
</div>
</div>



<br /><br />





<%= render 'host/photos/photos' %>


</div>
</div>

<br />
<div class="col-md-8">
<%= simple_form_for Review.new, url: room_reviews_path(@room) do |f| %>
<%= f.input :message %>
<div id="stars"></div>
<%= f.submit "Add a Review", class: 'btn btn-danger' %>

<% end %>
</div>
<div class="col-md-4">
<h1>Reviews</h1>
<% @room.reviews.each do |review| %>
<b><%= review.message %></b><br />
<%= review.rating %><br />
<%= review.user.email %>
<% end %>
</div>






<br />
<div class="container">
<div class="box col-md-8">
  <h6><%= @room.address %></h6>
  <% if @room.latitude.present? && @room.longitude.present? %>


  <script>
  function initMap() {
      var myLatLng = {lat: <%= @room.latitude %>, lng: <%= @room.longitude %>};

      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 12,
        center: myLatLng
      });

      var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        title: 'Hello World!'
      });
      var infoWindow = new google.maps.InfoWindow ({
        content: '<div id="content"><%= image_tag @room.image.variant(resize: "280x180") %></div>'
      });

      infoWindow.open(map, marker);
  

    }
  </script>
  <script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVI2DOGtO42Xt_-e9elvVoFH2vL0WyaMI&callback=initMap">
</script>
<div id="map">
</div>
<% end %>
</div>
</div>

<br /><br />
      

<div class="container"> 
     <h3>Rooms Nearby</h3>
  <div class="row">
<% for room in @room.nearbys(10) %>
  <div class="col-md-4">
    <div class="card"> 
     <% if room.image.attached? %><%= image_tag room.image, width: "100%", height: "100%"  %>
     <% end %>
      <div class="card-body"> 
          <h4 class="card-title"><%= link_to room.listing_name, room %></h4>  
               <div class="footer">
                  <span> $<%= room.rate %></span>
                  <span>Per Night</span>
                </div>
                <br />
            (<%= room.distance.round(2) %> miles away) 

                </div> 
            </div>
            </div>
         <% end %>
          </div>
          </div>
   

          <br />

          <script>
            $('#stars').raty({
              path: '/assets',
              scoreName: 'guest_review[star]',
              score: 1
            });
          </script>

